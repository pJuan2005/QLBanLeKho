<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet" />

  <!-- css -->
  <link rel="stylesheet" href="../Shared/css/goodsreceipts.css" />
  <script src="../Shared/angular/angular.min.js"></script>
  <script src="../Shared/angular/global.js"></script>
  <script src="../Shared/angular/goodsreceipts.js"></script>
  <script src="../Shared/angular/translation.js"></script>
  <title>GoodsReceipts</title>
</head>

<body ng-app="AppRetailPos" ng-controller="goodsreceiptsCtrl">
  <div class="slide-bar">
    <div class="slide-bar__header">
      <div class="app-slideBar">
        <div class="app-slideBar__left">
          <img src="../Shared/img/common/wheel.svg" alt="" class="icon" />
        </div>
        <div class="app-slideBar__right">
          <h1 class="name-app">RetailPro</h1>
          <p class="title-nameApp">Inventory & POS</p>
        </div>
      </div>
    </div>
    <div class="slide-bar__Content">
      <p class="slide-bar__label">{{ t('NAVIGATION') }}</p>
      <!-- menu button Dashboard -->
      <a href="../AdminFE/dashboard.html" ng-if="canShow('dashboard')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/dashboard.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_DASHBOARD') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button POS -->
      <a href="../AdminFE/pos.html" ng-if="canShow('pos')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/pos.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_POS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Products -->
      <a href="../AdminFE/products.html" ng-if="canShow('products')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/product.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_PRODUCTS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Categories -->
      <a href="../AdminFE/categories.html" ng-if="canShow('categories')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/category.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_CATEGORIES') }}</p>
          </div>
        </div>
      </a>

      <!-- menu button Promotions -->
      <a href="../AdminFE/promotions.html" ng-if="canShow('promotions')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/promotion.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_PROMOTIONS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Customers -->
      <a href="../AdminFE/customers.html" ng-if="canShow('customers')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/customer.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_CUSTOMERS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Suppliers -->
      <a href="../AdminFE/suppliers.html" ng-if="canShow('suppliers')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/supplier.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_SUPPLIERS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Purchase Orders -->
      <a href="../AdminFE/purchaseorders.html" ng-if="canShow('purchaseOrders')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/purchaseorder.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_PURCHASE_ORDERS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button StockCard -->
      <a href="../AdminFE/stockcard.html" ng-if="canShow('stock')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/stock.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_STOCK') }}</p>
          </div>
        </div>
      </a>

      <!-- menu button Goods Receipts -->
      <a href="../AdminFE/goodsreceipts.html" ng-if="canShow('greceipts')">
        <div class="slide-bar__MenuButton slide-bar__MenuButton--active">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/goodReceipt.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu-active">{{ t('GOODS_RECEIPTS') }}</p>
          </div>
        </div>
      </a>

      <!-- menu button Goods Issues -->
      <a href="../AdminFE/goodsissues.html" ng-if="canShow('gissues')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/goodIssues.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('GOODS_ISSUES') }}</p>
          </div>
        </div>
      </a>

      <!-- menu button Sales -->
      <a href="../AdminFE/sales.html" ng-if="canShow('sales')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/sales.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_SALES') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Returns -->
      <a href="../AdminFE/returns.html" ng-if="canShow('returns')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/return.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_RETURNS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Payments & Debts -->
      <a href="../AdminFE/payments.html" ng-if="canShow('payments')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/payments.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_PAYMENTS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Reports -->
      <a href="../AdminFE/reports.html" ng-if="canShow('reports')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/report.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_REPORTS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Audit Log -->
      <a href="../AdminFE/auditlog.html" ng-if="canShow('auditLog')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/auditlog.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_AUDIT_LOG') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Users -->
      <a href="../AdminFE/users.html" ng-if="canShow('users')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/user.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_USERS') }}</p>
          </div>
        </div>
      </a>
      <!-- menu button Settings -->
      <a href="../AdminFE/settings.html" ng-if="canShow('settings')">
        <div class="slide-bar__MenuButton">
          <div class="MenuButton-left">
            <img src="../Shared/img/common/setting.svg" alt="" class="icon" />
          </div>
          <div class="MenuButton-right">
            <p class="name-menu">{{ t('NAV_SETTINGS') }}</p>
          </div>
        </div>
      </a>
    </div>
    <div class="slide-bar__footer">
      <div class="app-slide-bar">
        <div class="ava">
          <img class="ava" src="../Shared/img/common/ava.svg" alt="" />
        </div>
        <div class="info">
          <p class="name">{{currentUser.fullname}}</p>
          <p class="role">{{currentUser.role}}</p>
        </div>
      </div>
    </div>
  </div>
  <div class="app-layout">
    <div class="top-bar">
      <div class="top-bar__content">
        <div class="top-bar__left" style="visibility: hidden">
          <img src="../Shared/img/common/search.svg" alt="" class="icon" />
          <input class="search" type="text" placeholder="{{ t('SEARCH_CATEGORY') }}" ng-model="searchCategories" />
        </div>
        <div class="top-bar__right">
          <p class="role">{{currentUser.role}}</p>
          <img src="../Shared/img/common/ava.svg" alt="" class="ava" id="avatar" />
        </div>
      </div>
      <div class="top-bar__info" id="information">
        <div class="info-top">
          <p class="name">{{currentUser.fullname}}</p>
          <p class="email">{{currentUser.email}}</p>
        </div>
        <div class="info-mid">
          <a href="#!">
            <p class="set">{{ t('PROFILE_SETTINGS') }}</p>
          </a>
        </div>
        <div class="info-bottom">
          <img src="../Shared/img/categories/logout.svg" alt="" class="icon" />
          <a href="../AuthFE/login.html">
            <p class="logout">{{ t('LOGOUT') }}</p>
          </a>
        </div>
      </div>
    </div>
    <div class="app-layout-content">
      <div class="container-top">
        <div class="container-top--left">
          <h1 class="name-system">{{ t('GR_TITLE') }}</h1>
          <p class="desc-system">
            {{ t('GR_DESC') }}
          </p>
        </div>
        <div class="control add-goodsreceipts" ng-click="openAddReceipt()">
          <img src="../Shared/img/common/plus.svg" alt="" class="icon-control" />
          <p class="name-control">{{ t('ADD_GR') }}</p>
        </div>
      </div>
      <div class="container-card">
        <div class="card">
          <p class="name-card">{{ t('ADD_GR') }}</p>
          <p class="data-card">{{stats.totalReceipts}}</p>
        </div>

        <div class="card">
          <p class="name-card">{{ t('GR_TOTAL') }}</p>
          <p class="data-card">{{stats.totalCompleted}}</p>
        </div>
        <div class="card">
          <p class="name-card">{{ t('GR_PENDING') }}</p>
          <p class="data-card">{{stats.totalPending}}</p>
        </div>
        <div class="card">
          <p class="name-card">{{ t('GR_PROCESSING') }}</p>
          <p class="data-card">{{stats.totalProcessing}}</p>
        </div>
      </div>

      <div class="search-goodreceipts">
        <!-- t√¨m theo kho·∫£ng th·ªùi gian -->
        <div class="search-field">
          <label>{{ t('GR_FROM_DATE') }}:</label>
          <input type="date" ng-model="searchFromDate" class="search" />
        </div>
        <div class="search-field">
          <label>{{ t('GR_TO_DATE') }}:</label>
          <input type="date" ng-model="searchToDate" class="search" />
        </div>

        <!-- t√¨m theo kho·∫£ng ti·ªÅn -->
        <div class="search-field">
          <label>{{ t('GR_MIN_AMOUNT') }}:</label>
          <input type="number" ng-model="searchMinAmount" class="search" placeholder="0" />
        </div>
        <div class="search-field">
          <label>{{ t('GR_MAX_AMOUNT') }}:</label>
          <input type="number" ng-model="searchMaxAmount" class="search" placeholder="1000000" />
        </div>

        <!-- t√¨m theo POID -->
        <div class="search-field">
          <label>{{ t('GR_POID') }}:</label>
          <input type="text" ng-model="searchPOID" class="search" placeholder="{{ t('PLACEHOLDER_POID') }}" />
        </div>
      </div>
      <!-- ph√¢n trang -->
      <div class="pager" ng-if="pager.total>0">
        <div class="pager-info">
          {{ t('PAGING_SHOWING') }}
          {{((pager.page-1)*pager.size)+1}}-{{Math.min(pager.page*pager.size,pager.total)}}
          {{ t('PAGING_OF') }} {{pager.total}} {{ t('PAGING_ITEMS') }}
        </div>
        <div class="page-nav">
          <label>
            {{ t('PAGING_PAGE_SIZE') }}:
            <select ng-model="pager.size" ng-change="changeSize()">
              <option value="10">10</option>
              <option value="20">20</option>
              <option value="30">30</option>
            </select>
          </label>
          <button class="btn ghost" ng-disable="pager.page === 1" ng-click="go(1)">
            ¬´
          </button>
          <button class="btn ghost" ng-disabled="pager.page === 1" ng-click="go(pager.page-1)">
            {{ t('PAGING_PREV') }}
          </button>
          <span class="page-no"></span>
          <button class="btn ghost" ng-disabled="pager.page >= pager.pages" ng-click="go(pager.page+1)">
            {{ t('PAGING_NEXT') }}
          </button>
          <button class="btn ghost" ng-disabled="pager.page >= pager.pages" ng-click="go(pager.pages)">
            ¬ª
          </button>
        </div>
      </div>
      <div class="card-table">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th class="id">{{ t('GR_RECEIPT_ID') }}</th>
                <th class="poid">{{ t('GR_PO_ID') }}</th>
                <th class="date">{{ t('GR_RECEIPT_DATE') }}</th>
                <th class="amount">{{ t('GR_TOTAL_AMOUNT') }}</th>
                <th class="user">{{ t('GR_USER_ID') }}</th>
                <th class="batch">{{ t('GR_BATCH_NO') }}</th>
                <th class="status">{{ t('GR_STATUS') }}</th>
                <th class="action txt-right">{{ t('ACTIONS') }}</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="gr in goodsReceipts">
                <td>{{gr.receiptID}}</td>
                <td>{{gr.poid}}</td>
                <td>{{gr.receiptDate | date:'yyyy-MM-dd'}}</td>
                <td>{{gr.totalAmount | number:2}}ƒë</td>
                <td>{{gr.userID}}</td>
                <td>{{gr.batchNo}}</td>
                <td>{{gr.status}}</td>
                <td class="txt-right">
                  <div class="action-menu">
                    <button class="menu-toggle" ng-click="toggleActionMenu(gr)">
                      ‚öô
                    </button>
                    <ul class="menu-list" ng-show="gr.showMenu">
                      <li ng-click="edit(gr)">‚úé {{ t('ACTION_EDIT') }}</li>
                      <li ng-click="remove(gr)">üóë {{ t('ACTION_DELETE') }}</li>
                      <li ng-click="detail(gr)">üîç {{ t('ACTION_DETAIL') }}</li>
                      <li ng-click="exportExcel(gr)">‚¨á {{ t('ACTION_EXPORT') }}</li>
                      <li ng-click="payment(gr)">üí∞ {{ t('ACTION_PAYMENT') }}</li>
                    </ul>
                  </div>
                </td>
              </tr>
              <tr ng-if="goodsReceipts.length == 0">
                <td colspan="8" class="empty">{{ t('NO_DATA') }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- form -->
      <div class="form">
        <!-- Add Goods Receipt -->
        <div class="form-add" ng-class="{open: showAddReceipt}" ng-click="closeAddReceiptOnOverlay($event)">
          <div class="form-add__content" ng-click="$event.stopPropagation()">
            <h3 class="title">{{ t('FORM_ADD_GR_TITLE') }}</h3>
            <p class="desc">{{ t('FORM_ADD_GR_DESC') }}</p>

            <form name="frmAddGR" ng-submit="addGoodsReceipt()">
              <!-- Phi·∫øu nh·∫≠p -->
              <label for="poid">{{ t('LABEL_POID') }}</label>
              <input type="number" id="poid" required placeholder="" ng-model="newReceipt.POID" />

              <label for="userid">{{ t('LABEL_USERID') }}</label>
              <input type="number" id="userid" required placeholder="" ng-model="newReceipt.UserID" />

              <!-- Chi ti·∫øt phi·∫øu nh·∫≠p -->
              <h4 class="subtitle">{{ t('LABEL_RECEIPT_DETAILS') }}</h4>
              <div ng-repeat="item in newReceiptDetails" class="detail-row">
                <label>{{ t('LABEL_PRODUCT_ID') }}</label>
                <input type="number" ng-model="item.ProductID" required placeholder="" />

                

                <label>{{ t('LABEL_EXPIRY_DATE') }}</label>
                <input type="date" ng-model="item.ExpiryDate" />

                <button type="button" class="remove" ng-click="removeDetailRowForNewReceipt($index)">
                  {{ t('BTN_REMOVE') }}
                </button>
              </div>

              <button type="button" class="add-detail" ng-click="addDetailRowForNewReceipt()">
                + {{ t('BTN_ADD_PRODUCT') }}
              </button>

              <!-- Footer -->
              <div class="dialog-footer">
                <button type="button" class="cancel" ng-click="cancelAddReceipt()">
                  {{ t('BTN_CANCEL') }}
                </button>
                <input class="submit" type="submit" value="Add Receipt"
                  ng-disabled="frmAddGR.$invalid || savingAddReceipt" />
              </div>
            </form>
          </div>
        </div>

        <div class="form-edit" ng-class="{open: showEdit}" ng-click="closeEditOnOverlay($event)">
          <div class="form-edit__content" ng-click="$event.stopPropagation()">
            <h3 class="title">{{ t('FORM_EDIT_GR_TITLE') }}</h3>
            <form name="frmEditGR" ng-submit="updateGoodsReceipt()">
              <!-- ReceiptDate -->
              <label for="date-edit">{{ t('LABEL_RECEIPT_DATE') }}</label>
              <input type="date" id="date-edit" required ng-model="editingReceipt.ReceiptDate" />

              <!-- UserID -->
              <label for="userid-edit">{{ t('LABEL_USERID') }}</label>
              <input type="number" id="userid-edit" required placeholder="{{ t('BTN_EDIT_GR') }}"
                ng-model="editingReceipt.UserID" />

              <!-- Footer -->
              <div class="dialog-footer">
                <button type="button" class="cancel" ng-click="cancelEdit()">
                  Cancel
                </button>
                <input class="submit" type="submit" value="Edit Goods Receipt"
                  ng-disabled="frmEditGR.$invalid || savingEdit" />
              </div>
            </form>
          </div>
        </div>
        <div class="form-delete" ng-class="{open: showDelete}" ng-click="closeDeleteOnOverlay($event)">
          <div class="form-delete__content" ng-click="$event.stopPropagation()">
            <h3 class="title">{{ t('FORM_DELETE_GR_TITLE') }}</h3>
            <p>
              {{ t('FORM_DELETE_GR_DESC') }}
              <strong>{{deleting.BatchNo}}</strong>?
            </p>
            <div class="dialog-footer">
              <button type="button" class="cancel" ng-click="cancelDelete()">
                {{ t('BTN_CANCEL') }}
              </button>
              <button type="button" class="submit" ng-click="confirmDelete()">
                {{ t('BTN_DELETE_GR') }}
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Detail Goods Receipt -->
      <div class="form-detail" ng-class="{open: showDetail}" ng-click="closeDetailOnOverlay($event)">
        <div class="form-detail__content" ng-click="$event.stopPropagation()">
          <h3 class="title">
            {{ t('FORM_GR_DETAIL_TITLE') }} - {{detailReceipt.BatchNo}}
          </h3>

          <!-- Form nh·∫≠p chi ti·∫øt m·ªõi -->
          <div class="detail-add-form">
            <h4>{{ t('BTN_ADD_PRODUCT') }}</h4>
            <div class="form-row">
              <label>{{ t('GRD_PRODUCT_ID') }}:</label>
              <input type="number" ng-model="newDetail.ProductID" required />
            </div>
            
            <div class="form-row">
              <label>Expiry Date:</label>
              <input type="date" ng-model="newDetail.ExpiryDate" />
            </div>
            <button class="add-btn" ng-click="addGoodsReceiptDetail()"
              ng-disabled="savingAddDetail || !newDetail.ProductID">
              <span ng-if="savingAddDetail">{{ t('BTN_PAYING') }}</span>
              <span ng-if="!savingAddDetail">{{ t('BTN_ADD_PRODUCT') }}</span>
            </button>
          </div>

          <!-- B·∫£ng chi ti·∫øt -->
          <table class="detail-table">
            <thead>
              <tr>
                <th>{{ t('GRD_PRODUCT_ID') }}</th>
                <th>{{ t('GRD_PRODUCT_NAME') }}</th>
                <th>{{ t('GRD_QTY') }}</th>
                <th>{{ t('GRD_UNIT_PRICE') }}</th>
                <th>{{ t('GRD_EXPIRY_DATE') }}</th>
                <th>{{ t('GRD_ACTIONS') }}</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="d in receiptDetails">
                <td>{{d.productID}}</td>
                <td>{{d.productName}}</td>
                <td>{{d.quantity}}</td>
                <td>{{d.unitPrice | currency:"":0}}</td>
                <td>
                  {{d.expiryDate ? (d.expiryDate | date:'yyyy-MM-dd') : '‚Äî'}}
                </td>
                <td>
                  <button class="remove-btn" ng-click="deleteGoodsReceiptDetail(d)">
                    üóë {{ t('BTN_DELETE_DETAIL') }}
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="dialog-footer">
            <button type="button" class="cancel" ng-click="closeDetail()">
              {{ t('BTN_CLOSE') }}
            </button>
          </div>
        </div>
      </div>

      <!-- ==================== MODAL THANH TO√ÅN NH√Ä CUNG C·∫§P ==================== -->
      <div class="form-payment" ng-class="{open: showPaymentModal}" ng-click="closePaymentModal()">
        <div class="form-payment__content" ng-click="$event.stopPropagation()">
          <h3 class="title">
            {{ t('PAY_TITLE') }} #{{paymentReceipt.ReceiptID}}
          </h3>
          <p class="subtitle">
            {{ t('PAY_SUPPLIER') }}:
            <strong>#{{paymentReceipt.SupplierID || '‚Äî'}}</strong> | {{ t('PAY_POID') }}:
            <strong>{{paymentReceipt.POID}}</strong> | {{ t('PAY_TOTAL') }}:
            <strong>{{paymentReceipt.TotalAmount | number:0}}ƒë</strong>
          </p>

          <!-- B·∫¢NG L·ªäCH S·ª¨ THANH TO√ÅN -->
          <div class="payment-history">
            <h4>{{ t('PAY_HISTORY_TITLE') }}</h4>
            <table class="detail-table">
              <thead>
                <tr>
                  <th>{{ t('PAY_HISTORY_ID') }}</th>
                  <th>{{ t('PAY_HISTORY_AMOUNT') }}</th>
                  <th>{{ t('PAY_HISTORY_DATE') }}</th>
                  <th>{{ t('PAY_HISTORY_METHOD') }}</th>
                  <th>{{ t('PAY_HISTORY_DESC') }}</th>
                </tr>
              </thead>
              <tbody>
                <tr ng-repeat="p in paymentHistory">
                  <td>{{p.paymentID}}</td>
                  <td class="txt-right">{{p.amount | number:0}}ƒë</td>
                  <td>{{p.paymentDate | date:'dd/MM/yyyy'}}</td>
                  <td>{{p.method}}</td>
                  <td>{{p.description || '‚Äî'}}</td>
                </tr>
                <tr ng-if="!paymentHistory || paymentHistory.length === 0">
                  <td colspan="5" class="empty">{{ t('PAY_NO_HISTORY') }}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- FORM TH√äM THANH TO√ÅN M·ªöI -->
          <div class="add-payment-form">
            <h4>{{ t('PAY_ADD_TITLE') }}</h4>
            <div class="form-row">
              <label>{{ t('PAY_AMOUNT') }} <span class="req">*</span></label>
              <input type="number" ng-model="newPayment.Amount" min="1" placeholder="" required />
            </div>
            <div class="form-row">
              <label>{{ t('PAY_METHOD') }} <span class="req">*</span></label>
              <select ng-model="newPayment.Method" required>
                <option value="">-- {{ t('PAY_METHOD') }} --</option>
                <option value="Ti·ªÅn m·∫∑t">{{ t('PAY_METHOD_CASH') }}</option>
                <option value="Chuy·ªÉn kho·∫£n">{{ t('PAY_METHOD_BANK') }}</option>
                <option value="Th·∫ª">{{ t('PAY_METHOD_CARD') }}</option>
                <option value="N·ª£">{{ t('PAY_METHOD_DEBT') }}</option>
              </select>
            </div>
            <div class="form-row">
              <label>{{ t('PAY_NOTE') }}</label>
              <input type="text" ng-model="newPayment.Description"
                placeholder="{{ t('EXAMP') }}" />
            </div>

            <div class="dialog-footer">
              <button type="button" class="cancel" ng-click="closePaymentModal()">
                {{ t('BTN_CANCEL') }}
              </button>
              <button type="button" class="submit" ng-click="addPayment()"
                ng-disabled="!newPayment.Amount || !newPayment.Method || savingPayment">
                <span ng-if="!savingPayment">{{ t('Pay') }}</span>
                <span ng-if="savingPayment">{{ t('Processing...') }}</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="../Shared/js/goodsreceipts.js"></script>
</body>

</html>