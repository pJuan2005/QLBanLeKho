<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- css -->
    <link rel="stylesheet" href="../Shared/css/paymentDebt.css" />
    <script src="../Shared/angular/angular.min.js"></script>
    <script src="../Shared/angular/global.js"></script>
    <script src="../Shared/angular/paymentDebt.js"></script>
    <script src="../Shared/angular/translation.js"></script>
    <title>Payments and Debt</title>
  </head>
  <body ng-app="AppRetailPos" ng-controller="paymentCtrl">
    <div class="slide-bar">
      <div class="slide-bar__header">
        <div class="app-slideBar">
          <div class="app-slideBar__left">
            <img src="../Shared/img/common/wheel.svg" alt="" class="icon" />
          </div>
          <div class="app-slideBar__right">
            <h1 class="name-app">RetailPro</h1>
            <p class="title-nameApp">Inventory & POS</p>
          </div>
        </div>
      </div>
      <div class="slide-bar__Content">
        <p class="slide-bar__label">{{ t('NAVIGATION') }}</p>
        <!-- menu button Dashboard -->
        <a href="../AdminFE/dashboard.html" ng-if="canShow('dashboard')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/dashboard.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_DASHBOARD') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button POS -->
        <a href="../AdminFE/pos.html" ng-if="canShow('pos')"
          ><div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/pos.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_POS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Products -->
        <a href="../AdminFE/products.html" ng-if="canShow('products')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/product.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_PRODUCTS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Categories -->
        <a href="../AdminFE/categories.html" ng-if="canShow('categories')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/category.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_CATEGORIES') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Promotions -->
        <a href="../AdminFE/promotions.html" ng-if="canShow('promotions')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/promotion.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_PROMOTIONS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button suppliers -->
        <a href="../AdminFE/customers.html" ng-if="canShow('customers')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/customer.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_CUSTOMERS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Suppliers -->
        <a href="../AdminFE/suppliers.html" ng-if="canShow('suppliers')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/supplier.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_SUPPLIERS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Purchase Orders -->
        <a
          href="../AdminFE/purchaseorders.html"
          ng-if="canShow('purchaseOrders')"
        >
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/purchaseorder.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_PURCHASE_ORDERS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button StockCard -->
        <a href="../AdminFE/stockcard.html" ng-if="canShow('purchaseOrders')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/stock.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_STOCK') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Goods Receipts -->
        <a href="../AdminFE/goodsreceipts.html" ng-if="canShow('greceipts')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/goodReceipt.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('GOODS_RECEIPTS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Goods Issues -->
        <a href="../AdminFE/goodsissues.html" ng-if="canShow('gissues')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/goodIssues.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('GOODS_ISSUES') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Sales -->
        <a href="../AdminFE/sales.html" ng-if="canShow('sales')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/sales.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_SALES') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Returns -->
        <a href="../AdminFE/returns.html" ng-if="canShow('returns')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/return.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_RETURNS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Payments & Debts -->
        <a href="../AdminFE/payments.html" ng-if="canShow('payments')">
          <div class="slide-bar__MenuButton slide-bar__MenuButton--active">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/payments.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu-active">{{ t('NAV_PAYMENTS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Reports -->
        <a href="../AdminFE/reports.html" ng-if="canShow('reports')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/report.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_REPORTS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Audit Log -->
        <a href="../AdminFE/auditlog.html" ng-if="canShow('auditLog')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img
                src="../Shared/img/common/auditlog.svg"
                alt=""
                class="icon"
              />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_AUDIT_LOG') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Users -->
        <a href="../AdminFE/users.html" ng-if="canShow('users')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/user.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_USERS') }}</p>
            </div>
          </div>
        </a>
        <!-- menu button Settings -->
        <a href="../AdminFE/settings.html" ng-if="canShow('settings')">
          <div class="slide-bar__MenuButton">
            <div class="MenuButton-left">
              <img src="../Shared/img/common/setting.svg" alt="" class="icon" />
            </div>
            <div class="MenuButton-right">
              <p class="name-menu">{{ t('NAV_SETTINGS') }}</p>
            </div>
          </div>
        </a>
      </div>
      <div class="slide-bar__footer">
        <div class="app-slide-bar">
          <div class="ava">
            <img class="ava" src="../Shared/img/common/ava.svg" alt="" />
          </div>
          <div class="info">
            <p class="name">{{currentUser.fullname}}</p>
            <p class="role">{{currentUser.role}}</p>
          </div>
        </div>
      </div>
    </div>
    <div class="app-layout">
      <div class="top-bar">
        <div class="top-bar__content">
          <div class="top-bar__left" style="visibility: hidden">
            <img src="../Shared/img/common/search.svg" alt="" class="icon" />
            <input
              class="search"
              type="text"
              placeholder="Search by categories name"
              ng-model="searchCategories"
            />
          </div>
          <div class="top-bar__right">
            <p class="role">{{currentUser.role}}</p>
            <img
              src="../Shared/img/common/ava.svg"
              alt=""
              class="ava"
              id="avatar"
            />
          </div>
        </div>
        <div class="top-bar__info" id="information">
          <div class="info-top">
            <p class="name">{{currentUser.fullname}}</p>
            <p class="email">{{currentUser.email}}</p>
          </div>
          <div class="info-mid">
            <a href="#!"><p class="set">{{ t('PROFILE_SETTINGS') }}</p></a>
          </div>
          <div class="info-bottom">
            <img
              src="../Shared/img/categories/logout.svg"
              alt=""
              class="icon"
            />
            <a href="../AuthFE/login.html"><p class="logout">{{ t('LOGOUT') }}</p></a>
          </div>
        </div>
      </div>
      <div class="app-layout__content">
        <div class="layout-top">
          <div class="name-page">
            <img
              src="../Shared/img/payment/logo-payment.svg"
              alt=""
              class="icon-payment"
            />
            <h1 class="name">{{ t('PAY_PAGE_TITLE') }}</h1>
          </div>
          <div class="select-payment">
            <p
              class="pay-customer"
              ng-class="{ active: mode === 'customer' }"
              ng-click="setMode('customer')"
            >
              {{ t('PAY_TAB_CUSTOMER') }}
            </p>

            <p
              class="pay-supplier"
              ng-class="{ active: mode === 'supplier' }"
              ng-click="setMode('supplier')"
            >
              {{ t('PAY_TAB_SUPPLIER') }}
            </p>
          </div>
        </div>
        <div class="layout-customer" ng-show="mode === 'customer'">
          <div class="layout-customer__card">
            <div class="card card-total__debt">
              <div class="total-debt__left">
                <img
                  src="../Shared/img/payment/logo-cus.svg"
                  alt=""
                  class="icon-customer"
                />
              </div>
              <div class="total-debt__right">
                <div class="title-total-debt">{{ t('PAY_TOTAL_DEBT') }}</div>
                <div class="data-total-debt">
                  {{formatVnd(totalCustomerDebt)}}
                </div>
                <div class="desc-total-debt">
                  {{ t('PAY_BASED_ON_BALANCE') }}
                </div>
              </div>
            </div>
            <div class="card card-settled">
              <div class="card-settled__left">
                <img
                  src="../Shared/img/payment/logo-success.svg"
                  alt=""
                  class="icon-success"
                />
              </div>
              <div class="card-settled__right">
                <div class="title-settled">{{ t('PAY_SETTLED_THIS_MONTH') }}</div>
                <div class="data-settled">
                  {{ formatVnd(settledThisMonthCustomer) }}
                </div>
                <div class="desc-settled">
                  {{ t('PAY_RECORDED_THIS_MONTH') }}
                </div>
              </div>
            </div>
          </div>
          <div class="layout-customer__filter">
            <div class="search-by__information">
              <img
                src="../Shared/img/common/search.svg"
                alt=""
                class="icon-search"
              />
              <input
                type="text"
                placeholder="{{ t('PAY_SEARCH_CUSTOMER_PLACEHOLDER') }}"
                ng-model="searchCustomerText"
                ng-keypress="$event.which === 13 && searchCustomers()"
              />
            </div>
            <div class="search-by__status">
              <select
                class="select-status"
                ng-model="filter.status"
                ng-change="onStatusChange()"
              >
                <option value="">{{ t('PAY_FILTER_ALL') }}</option>
                <option value="unpaid">{{ t('PAY_FILTER_UNPAID') }}</option>
                <option value="partial">{{ t('PAY_FILTER_PARTIAL') }}</option>
                <!-- nếu sau này có thêm Paid thì thêm:
    <option value="paid">Paid</option> -->
              </select>
            </div>
            <div class="search-by__date">
              <input
                type="date"
                class="from-date"
                ng-model="filter.fromDate"
                ng-change="onDateChange()"
              />
              <input
                type="date"
                class="to-date"
                ng-model="filter.toDate"
                ng-change="onDateChange()"
              />
            </div>
          </div>
          <div class="layout-customer__list">
            <p class="desc-table">{{ t('PAY_CUSTOMER_OPEN_INVOICES') }}</p>

            <div class="table-wrapper">
              <table class="debt-table">
                <thead>
                  <tr>
                    <th>{{ t('PAY_COL_INVOICE_NO') }}#</th>
                    <th>{{ t('PAY_COL_DATE') }}</th>
                    <th>{{ t('PAY_COL_CUSTOMER') }}</th>
                    <th>{{ t('PAY_COL_PHONE') }}</th>
                    <th class="txt-right">{{ t('PAY_COL_TOTAL') }}</th>
                    <th class="txt-right">{{ t('PAY_COL_PAID') }}</th>
                    <th class="txt-right">{{ t('PAY_COL_REMAINING') }}</th>
                    <th class="txt-right">{{ t('PAY_COL_ACTIONS') }}</th>
                  </tr>
                </thead>

                <tbody>
                  <tr ng-repeat="inv in arInvoices | filter: filterByStatus">
                    <td>#{{inv.invoiceNo || inv.saleID}}</td>
                    <!-- nếu chưa có invoiceNo thì fallback về saleID -->

                    <td>{{inv.saleDate | date:'dd/MM/yyyy'}}</td>
                    <td>{{inv.customerName}}</td>
                    <td>{{inv.phone}}</td>
                    <td class="txt-right">{{ formatVnd(inv.totalAmount) }}</td>
                    <td class="txt-right">{{ formatVnd(inv.paidAmount) }}</td>
                    <td class="txt-right amount-remain">
                      {{ formatVnd(inv.remaining) }}
                    </td>
                    <td class="txt-right">
                      <button
                        class="btn-view"
                        ng-click="openInvoiceDetail(inv)"
                      >
                        <img
                          src="../Shared/img/payment/view.svg"
                          class="icon"
                        />
                        {{ t('PAY_BTN_VIEW') }}
                      </button>
                      <button class="btn-pay" ng-click="openCustomerPay(inv)">
                        <img
                          src="../Shared/img/payment/plus.svg"
                          class="icon"
                        />
                        {{ t('PAY_BTN_COLLECT') }}
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="layout-supplier" ng-show="mode === 'supplier'">
          <div class="layout-supplier__card">
            <div class="card card-total__payable">
              <div class="total-payable__left">
                <img
                  src="../Shared/img/payment/logo-sup.svg"
                  alt=""
                  class="icon-supplier"
                />
              </div>
              <div class="total-payable__right">
                <div class="title-total-payable">{{ t('PAY_SUPPLIER_OPEN_BILLS') }}</div>
                <div class="data-total-payable">
                  {{formatVnd(totalSupplierPayable)}}
                </div>
                <div class="desc-total-payable">
                  Based on current open balances
                </div>
              </div>
            </div>
            <div class="card card-settled">
              <div class="card-settled__left">
                <img
                  src="../Shared/img/payment/logo-success.svg"
                  alt=""
                  class="icon-success"
                />
              </div>
              <div class="card-settled__right">
                <div class="title-settled">{{ t('PAY_SETTLED_THIS_MONTH This Month') }}</div>
                <div class="data-settled">
                  {{ formatVnd(settledThisMonthSupplier) }}
                </div>
                <div class="desc-settled">
                  {{ t('PAY_RECORDED_THIS_MONTH') }}
                </div>
              </div>
            </div>
          </div>
          <div class="layout-supplier__filter">
            <div class="search-by__information">
              <img
                src="../Shared/img/common/search.svg"
                alt=""
                class="icon-search"
              />
              <input
                type="text"
                placeholder="{{ t('PAY_SEARCH_SUPPLIER_PLACEHOLDER') }}"
                ng-model="searchSupplierText"
                ng-keypress="$event.which === 13 && searchSuppliers()"
              />
            </div>
            <div class="search-by__status">
              <select
                class="select-status"
                ng-model="filter.status"
                ng-change="onStatusChange()"
              >
                <option value="">{{ t('PAY_FILTER_ALL') }}</option>
                <option value="unpaid">{{ t('PAY_FILTER_UNPAID') }}</option>
                <option value="partial">{{ t('PAY_FILTER_PARTIAL') }}</option>
              </select>
            </div>
            <div class="search-by__date">
              <input
                type="date"
                class="from-date"
                ng-model="filter.fromDate"
                ng-change="onDateChange()"
              />
              <input
                type="date"
                class="to-date"
                ng-model="filter.toDate"
                ng-change="onDateChange()"
              />
            </div>
          </div>
          <div class="layout-supplier__list">
            <p class="desc-table">{{ t('PAY_CUSTOMER_OPEN_INVOICES') }}</p>
            <div class="table-debt">
              <table>
                <thead>
                  <tr>
                    <th class="invoice-no">{{ t('PAY_COL_INVOICE_NO') }}#</th>
                    <th class="date-col">{{ t('PAY_COL_DATE') }}</th>
                    <th class="name-customer">{{ t('PAY_COL_CUSTOMER') }}</th>
                    <th class="money-col txt-right">{{ t('PAY_COL_TOTAL') }}</th>
                    <th class="money-col txt-right">{{ t('PAY_COL_PAID') }}</th>
                    <th class="money-col txt-right">{{ t('PAY_COL_REMAINING') }}</th>
                    <th class="action txt-right">{{ t('PAY_COL_ACTIONS') }}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="b in apBills | filter: filterByStatus">
                    <td>#{{b.receiptID}}</td>
                    <td>{{b.receiptDate | date:'dd/MM/yyyy'}}</td>
                    <td>{{b.supplierName}}</td>
                    <td class="txt-right">{{ formatVnd(b.totalAmount) }}</td>
                    <td class="txt-right">{{ formatVnd(b.paidAmount) }}</td>
                    <td class="txt-right remaining-cell">
                      {{ formatVnd(b.remaining) }}
                    </td>
                    <td class="txt-right">
                      <button class="view" ng-click="openBillDetail(b)">
                        <img
                          src="../Shared/img/payment/view.svg"
                          alt=""
                          class="icon-view"
                        />
                        <p class="view-desc">{{ t('PAY_BTN_VIEW') }}</p>
                      </button>
                      <button class="collect-pay" ng-click="openSupplierPay(b)">
                        <img
                          src="../Shared/img/payment/plus.svg"
                          alt=""
                          class="icon-plus"
                        />
                        <p class="pay-desc">{{ t('PAY_BTN_COLLECT') }}</p>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- PAGER -->
        <div class="pager" ng-if="pager.total > 0">
          <div class="pager-info">
            {{ t('PAGING_SHOWING') }} {{ ((pager.page-1)*pager.size)+1 }}-{{
            Math.min(pager.page*pager.size,pager.total) }} {{ t('PAGING_OF') }} {{ pager.total }}
            {{ t('PAGING_ITEMS') }}
          </div>
          <div class="page-nav">
            <label>
              {{ t('PAGING_PAGE_SIZE') }}:
              <select ng-model="pager.size" ng-change="changeSize()">
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="30">30</option>
              </select>
            </label>
            <button
              class="btn ghost"
              ng-disabled="pager.page === 1"
              ng-click="go(1)"
            >
              «
            </button>
            <button
              class="btn ghost"
              ng-disabled="pager.page === 1"
              ng-click="go(pager.page-1)"
            >
              {{ t('PAGING_PREV') }}
            </button>
            <span class="page-no">
              {{ t('PAGING_PAGE') }} {{ pager.page }} / {{ pager.pages }}
            </span>
            <button
              class="btn ghost"
              ng-disabled="pager.page >= pager.pages"
              ng-click="go(pager.page+1)"
            >
              {{ t('PAGING_NEXT') }}
            </button>
            <button
              class="btn ghost"
              ng-disabled="pager.page >= pager.pages"
              ng-click="go(pager.pages)"
            >
              »
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="form" ng-class="{ 'show': showOverlay }">
      <div
        class="form-customer"
        ng-class="{ 'active': activeForm === 'customer' }"
      >
        <div class="form-customer__detail">
          <div class="intro-form">
            <img
              src="../Shared/img/payment/logo-cus.svg"
              alt=""
              class="icon-cus-form"
            />
            <p class="name-form__customer">{{ t('PAY_CUSTOMER_DETAIL_TITLE') }}</p>
          </div>
          <p class="desc-form">
            {{ t('PAY_CUSTOMER_DETAIL_DESC') }}
          </p>
          <div class="information-customer__detail" ng-if="selectedInvoice">
            <div class="detail-left">
              <p class="customer-name-title">{{ t('PAY_CUSTOMER_NAME') }}</p>
              <p class="customer-name-data">
                {{ selectedInvoice.customerName }}
              </p>
            </div>
            <div class="detail-right">
              <p class="customer-debt-title">{{ t('PAY_DEBT_LIMIT') }}</p>
              <!-- nếu BE có trường debtLimit thì xài, không thì tạm dùng remaining -->
              <p class="customer-debt-data">
                {{ formatVnd(selectedInvoice.debtLimit ||
                selectedInvoice.remaining) }}
              </p>
            </div>
          </div>

          <div class="statistic" ng-if="selectedInvoice">
            <div class="total-sales">
              <div class="total-sales__top">{{ t('PAY_TOTAL_SALES') }}</div>
              <div class="total-sales__bottom">
                {{ formatVnd(selectedInvoice.totalAmount) }}
              </div>
            </div>
            <div class="total-payments">
              <div class="total-payments__top">{{ t('PAY_TOTAL_PAYMENTS') }}</div>
              <div class="total-payments__bottom">
                {{ formatVnd(selectedInvoice.paidAmount) }}
              </div>
            </div>
            <div class="current-debts">
              <div class="current-debts__top">{{ t('PAY_CURRENT_DEBT') }}</div>
              <div class="current-debts__bottom">
                {{ formatVnd(selectedInvoice.remaining) }}
              </div>
            </div>
          </div>
        </div>
        <div class="form-customer__pay">
          <p class="name-form__pay">{{ t('PAY_RECORD_PAYMENT_CUSTOMER') }}</p>
          <p class="desc-name__form">{{ t('PAY_RECORD_PAYMENT_DESC') }}</p>
          <div class="information-customer__pay" ng-if="selectedInvoice">
            <p class="customer-pay__title">{{ t('TB_CUSTOMER') }}</p>
            <p class="customer-pay__name">{{ selectedInvoice.customerName }}</p>
            <p class="customer-pay__phone">{{ selectedInvoice.phone }}</p>
          </div>
          <form class="input-pay__customer" ng-submit="saveCustomerPayment()">
            <label for="amount">{{ t('PAY_FIELD_AMOUNT') }}</label><br />
            <input
              type="number"
              id="amount"
              placeholder="15000000"
              ng-model="customerPayment.amount"
              required
            />
            <br />

            <label for="date-pay">{{ t('PAY_FIELD_DATE') }}</label><br />
            <input
              type="date"
              id="date-pay"
              ng-model="customerPayment.paymentDate"
              required
            />
            <br />

            <label for="method">{{ t('PAY_FIELD_METHOD') }}</label><br />
            <select id="method" ng-model="customerPayment.method" required>
              <option value="Cash">{{ t('PAY_METHOD_CASH') }}</option>
              <option value="Bank">{{ t('PAY_METHOD_BANK') }}</option>
            </select>
            <br />

            <label for="desc">{{ t('PAY_FIELD_DESC') }}</label><br />
            <textarea
              id="desc"
              placeholder="{{ t('PAYMENT_NOTE') }}"
              ng-model="customerPayment.description"
            ></textarea>
            <br />

            <div class="action-pay">
              <div class="cancel" ng-click="closeOverlay()">{{ t('PAY_BTN_CANCEL') }}</div>
              <!-- type="submit" để form gọi ng-submit -->
              <button class="accpet" type="submit">{{ t('PAY_BTN_SAVE_PAYMENT') }}</button>
            </div>
          </form>
        </div>
      </div>
      <div
        class="form-supplier"
        ng-class="{ 'active': activeForm === 'supplier' }"
      >
        <div class="form-supplier__detail">
          <div class="intro-form">
            <img
              src="../Shared/img/payment/logo-sup.svg"
              alt=""
              class="icon-sup-form"
            />
            <p class="name-form__supplier">{{ t('PAY_SUPPLIER_DETAIL_TITLE') }}</p>
          </div>
          <p class="desc-form">
            {{ t('PAY_SUPPLIER_DETAIL_DESC') }}
          </p>
          <div class="information-supplier__detail" ng-if="selectedBill">
            <div class="detail-left">
              <p class="supplier-name-title">{{ t('PAY_SUPPLIER_NAME') }}</p>
              <p class="supplier-name-data">{{ selectedBill.supplierName }}</p>
            </div>
            <div class="detail-right">
              <p class="supplier-id-title">{{ t('PAY_SUPPLIER_ID') }}</p>
              <!-- tuỳ SP trả về, đổi thành supplierCode / supplierID cho đúng -->
              <p class="supplier-id-data">
                {{ selectedBill.supplierCode || selectedBill.supplierID }}
              </p>
            </div>
          </div>

          <div class="statistic" ng-if="selectedBill">
            <div class="total-received">
              <div class="total-received__top">{{ t('PAY_RECEIVED_TOTAL') }}</div>
              <div class="total-received__bottom">
                {{ formatVnd(selectedBill.totalAmount) }}
              </div>
            </div>
            <div class="total-payments">
              <div class="total-payments__top">{{ t('PAY_PAYMENTS_TOTAL') }}</div>
              <div class="total-payments__bottom">
                {{ formatVnd(selectedBill.paidAmount) }}
              </div>
            </div>
            <div class="current-payable">
              <div class="current-payable__top">{{ t('PAY_CURRENT_PAYABLE') }}</div>
              <div class="current-payable__bottom">
                {{ formatVnd(selectedBill.remaining) }}
              </div>
            </div>
          </div>
        </div>
        <div class="form-supplier__pay">
          <p class="name-form__pay">{{ t('PAY_RECORD_PAYMENT_SUPPLIER') }}</p>
          <p class="desc-name__form">{{ t('PAY_RECORD_PAYMENT_SUPPLIER_DESC') }}</p>
          <div class="information-supplier__pay" ng-if="selectedBill">
            <p class="supplier-pay__title">{{ t('PAY_SUPPLIER') }}</p>
            <p class="supplier-pay__name">{{ selectedBill.supplierName }}</p>
          </div>
          <form class="input-pay__supplier" ng-submit="saveSupplierPayment()">
            <label for="amount">{{ t('PAY_FIELD_AMOUNT') }}</label><br />
            <input
              type="number"
              id="amount"
              placeholder="15000000"
              ng-model="supplierPayment.amount"
              required
            />
            <br />

            <label for="date-pay">{{ t('PAY_FIELD_DATE') }}</label><br />
            <input
              type="date"
              id="date-pay"
              ng-model="supplierPayment.paymentDate"
              required
            />
            <br />

            <label for="method">{{ t('PAY_FIELD_METHOD') }}</label><br />
            <select id="method" ng-model="supplierPayment.method" required>
              <option value="Cash">{{ t('PAY_METHOD_CASH') }}</option>
              <option value="Bank">{{ t('PAY_METHOD_BANK') }}</option>
            </select>
            <br />

            <label for="desc">{{ t('PAY_FIELD_DESC') }}</label><br />
            <textarea
              id="desc"
              placeholder="Add payment notes..."
              ng-model="supplierPayment.description"
            ></textarea>
            <br />

            <div class="action-pay">
              <div class="cancel" ng-click="closeOverlay()">{{ t('PAY_BTN_CANCEL') }}</div>
              <button class="accpet" type="submit">{{ t('PAY_BTN_SAVE_PAYMENT_SUPPLIER') }}</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="../Shared/js/paymentDebt.js"></script>
  </body>
</html>
