<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- css -->
    <link rel="stylesheet" href="../Shared/css/stockcard.css" />
    <script src="../Shared/angular/angular.min.js"></script>
    <script src="../Shared/angular/global.js"></script>
    <script src="../Shared/angular/stockcard.js"></script>
    <script src="../Shared/angular/translation.js"></script>
    <!-- Th∆∞ vi·ªán ExcelJS v√† FileSaver -->
    <script src="https://cdn.jsdelivr.net/npm/exceljs@4.3.0/dist/exceljs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <title>{{ t('STOCK_MANAGEMENT') }}</title>
  </head>
  <body ng-app="AppRetailPos" ng-controller="stockcardCtrl">
    <div class="app-content">
      <div class="slide-bar">
        <div class="slide-bar__header">
          <div class="app-slideBar">
            <div class="app-slideBar__left">
              <img src="../Shared/img/common/wheel.svg" alt="" class="icon" />
            </div>
            <div class="app-slideBar__right">
              <h1 class="name-app">RetailPro</h1>
              <p class="title-nameApp">Inventory & POS</p>
            </div>
          </div>
        </div>
        <div class="slide-bar__Content">
          <p class="slide-bar__label">{{ t('NAVIGATION') }}</p>
          <!-- menu button Dashboard -->
          <a href="../AdminFE/dashboard.html" ng-if="canShow('dashboard')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/dashboard.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_DASHBOARD') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button POS -->
          <a href="../AdminFE/pos.html" ng-if="canShow('pos')"
            ><div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img src="../Shared/img/common/pos.svg" alt="" class="icon" />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_POS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Products -->
          <a href="../AdminFE/products.html" ng-if="canShow('products')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/product.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_PRODUCTS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Categories -->
          <a href="../AdminFE/categories.html" ng-if="canShow('categories')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/category.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_CATEGORIES') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Promotions -->
          <a href="../AdminFE/promotions.html" ng-if="canShow('promotions')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/promotion.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_PROMOTIONS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Customers -->
          <a href="../AdminFE/customers.html" ng-if="canShow('customers')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/customer.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_CUSTOMERS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Suppliers -->
          <a href="../AdminFE/suppliers.html" ng-if="canShow('suppliers')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/supplier.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_SUPPLIERS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Purchase Orders -->
          <a
            href="../AdminFE/purchaseorders.html"
            ng-if="canShow('purchaseOrders')"
          >
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/purchaseorder.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_PURCHASE_ORDERS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button stock -->
          <a href="../AdminFE/stockcard.html" ng-if="canShow('stock')">
            <div class="slide-bar__MenuButton slide-bar__MenuButton--active">
              <div class="MenuButton-left">
                <img src="../Shared/img/common/stock.svg" alt="" class="icon" />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu-active">{{ t('NAV_STOCK') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Goods Receipts -->
          <a href="../AdminFE/goodsreceipts.html" ng-if="canShow('greceipts')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/goodReceipt.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('GOODS_RECEIPTS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Goods Issues -->
          <a href="../AdminFE/goodsissues.html" ng-if="canShow('gissues')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/goodIssues.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('GOODS_ISSUES') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Sales -->
          <a href="../AdminFE/sales.html" ng-if="canShow('sales')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img src="../Shared/img/common/sales.svg" alt="" class="icon" />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_SALES') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Returns -->
          <a href="../AdminFE/returns.html" ng-if="canShow('returns')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/return.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_RETURNS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Payments & Debts -->
          <a href="../AdminFE/payments.html" ng-if="canShow('payments')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/payments.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_PAYMENTS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Reports -->
          <a href="../AdminFE/reports.html" ng-if="canShow('reports')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/report.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_REPORTS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Audit Log -->
          <a href="../AdminFE/auditlog.html" ng-if="canShow('auditLog')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/auditlog.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_AUDIT_LOG') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Users -->
          <a href="../AdminFE/users.html" ng-if="canShow('users')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img src="../Shared/img/common/user.svg" alt="" class="icon" />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_USERS') }}</p>
              </div>
            </div>
          </a>
          <!-- menu button Settings -->
          <a href="../AdminFE/settings.html" ng-if="canShow('settings')">
            <div class="slide-bar__MenuButton">
              <div class="MenuButton-left">
                <img
                  src="../Shared/img/common/setting.svg"
                  alt=""
                  class="icon"
                />
              </div>
              <div class="MenuButton-right">
                <p class="name-menu">{{ t('NAV_SETTINGS') }}</p>
              </div>
            </div>
          </a>
        </div>
        <div class="slide-bar__footer">
          <div class="app-slide-bar">
            <div class="ava">
              <img class="ava" src="../Shared/img/common/ava.svg" alt="" />
            </div>
            <div class="info">
              <p class="name">{{currentUser.fullname}}</p>
              <p class="role">{{currentUser.role}}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="app-layout">
        <div class="top-bar">
          <div class="top-bar__content">
            <div class="top-bar__left" style="visibility: hidden">
              <img src="../Shared/img/common/search.svg" alt="" class="icon" />
              <input
                class="search"
                type="text"
                placeholder="Search by categories name"
                ng-model="searchCategories"
              />
            </div>
            <div class="top-bar__right">
              <p class="role">{{currentUser.role}}</p>
              <img
                src="../Shared/img/common/ava.svg"
                alt=""
                class="ava"
                id="avatar"
              />
            </div>
          </div>
          <div class="top-bar__info" id="information">
            <div class="info-top">
              <p class="name">{{currentUser.fullname}}</p>
              <p class="email">{{currentUser.email}}</p>
            </div>
            <div class="info-mid">
              <a href="#!"><p class="set">Profile Settings</p></a>
            </div>
            <div class="info-bottom">
              <img
                src="../Shared/img/categories/logout.svg"
                alt=""
                class="icon"
              />
              <a href="../AuthFE/login.html"><p class="logout">Logout</p></a>
            </div>
          </div>
        </div>

        <div class="app-layout-content">
          <h1 class="name-menu">{{ t('STOCK_MANAGEMENT') }}</h1>
          <p class="desc">{{ t('STOCK_DESC') }}</p>
          <div class="display-container">
            <div class="total farme">
              <p class="name-display">{{ t('TOTAL_STOCKCARD') }}</p>
              <p class="data">{{stats.total}}</p>
            </div>
            <div class="avg farme">
              <p class="name-display">{{ t('STOCK_IN') }}</p>
              <p class="data">{{stats.instock}}</p>
            </div>
            <div class="most-common farme">
              <p class="name-display">{{ t('STOCK_OUT') }}</p>
              <p class="data">{{stats.outstock}}</p>
            </div>
          </div>
          <div class="control">
            <div class="control-left">
              <img src="../Shared/img/common/search.svg" alt="" class="icon" />
              <select
                class="search"
                placeholder="{{ t('SEARCH_TRANSACTION_TYPE') }}"
                ng-change="filter()"
                ng-model="searchType"
              >
                <option value="ALL">{{ t('TRANSACTION_ALL') }}</option>
                <option value="IN">IN</option>
                <option value="OUT">OUT</option>
              </select>
            </div>

            <!-- ph√¢n trang -->
            <div class="pager" ng-if="pager.total>0">
              <div class="pager-info">
                {{ t('PAGING_SHOWING') }}
                {{((pager.page-1)*pager.size)+1}}-{{Math.min(pager.page*pager.size,pager.total)}}
                {{ t('PAGING_OF') }} {{pager.total}} {{ t('PAGING_ITEMS') }}
              </div>
              <div class="page-nav">
                <label>
                  {{ t('PAGING_PAGE_SIZE') }}:
                  <select ng-model="pager.size" ng-change="changeSize()">
                    <option value="-1">{{ t('TRANSACTION_ALL') }}</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="30">30</option>
                  </select>
                </label>
                <button
                  class="btn ghost"
                  ng-disabled="pager.page === 1"
                  ng-click="go(1)"
                >
                  ¬´
                </button>
                <button
                  class="btn ghost"
                  ng-disabled="pager.page === 1"
                  ng-click="go(pager.page-1)"
                >
                  {{ t('PAGING_PREV') }}
                </button>
                <span class="page-no"></span>
                <button
                  class="btn ghost"
                  ng-disabled="pager.page >= pager.pages"
                  ng-click="go(pager.page+1)"
                >
                  {{ t('PAGING_NEXT') }}
                </button>
                <button
                  class="btn ghost"
                  ng-disabled="pager.page >= pager.pages"
                  ng-click="go(pager.pages)"
                >
                  ¬ª
                </button>
              </div>
            </div>
            <div class="control-right">
              {{ t('FILTER_FROM_DATE') }}
              <div class="control-date">
                <input
                  class="search"
                  type="date"
                  ng-model="searchFromDate"
                  ng-change="filter()"
                />
              </div>
              {{ t('FILTER_TO_DATE') }}
              <div class="control-date">
                <input
                  class="search"
                  type="date"
                  ng-model="searchToDate"
                  ng-change="filter()"
                />
              </div>

              <div class="export" ng-click="exportExcel()">
                <img
                  src="../Shared/img/common/export.svg"
                  alt=""
                  class="icon"
                />
              </div>
            </div>
          </div>
          <!-- table -->
          <div class="card">
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>{{ t('TB_STOCK_ID') }}</th>
                    <th>{{ t('TB_PRODUCT_NAME') }}</th>
                    <th>{{ t('TB_TRANSACTION') }}</th>
                    <th>{{ t('TB_QUANTITY') }}</th>
                    <th>{{ t('TB_DATE') }}</th>
                    <th class="txt-right">{{ t('ACTIONS') }}</th>
                  </tr>
                </thead>

                <tbody>
                  <tr ng-repeat="s in stocks">
                    <td>{{s.stockID}}</td>
                    <td>{{s.productName}}</td>
                    <td>{{s.transactionType}}</td>
                    <td>{{s.quantity}}</td>
                    <td>{{s.transactionDate | date:'dd/MM/yyyy'}}</td>

                    <td class="txt-right">
                      <button class="link danger" ng-click="remove(s)">
                        üóë
                      </button>
                      <button class="link" ng-click="detail(s)">üëÅÔ∏è</button>
                    </td>
                  </tr>

                  <tr ng-if="!stocks || stocks.length == 0">
                    <td colspan="6" class="empty">{{ t('NO_STOCK_DATA') }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- form -->
          <div class="form">
            <!-- detail -->
            <div class="form-detail">
              <div class="form-detail__content">
                <h3 class="title">{{ t('DETAIL_STOCKCARD') }}</h3>
                <p class="desc">{{ t('DETAIL_STOCKCARD_DESC') }}</p>
                <form name="frmDetail">
                  <!-- C·ªôt tr√°i ng-submit="detail()"-->
                  <div>
                    <label for="stockID-detail"
                      >{{ t('LABEL_STOCK_ID') }}</label
                    >
                    <input
                      type="text"
                      id="stockID-detail"
                      readonly
                      ng-model="detailStock.stockID"
                    />

                    <label for="productName-detail"
                      >{{ t('LABEL_PRODUCT_NAME') }}</label
                    >
                    <input
                      type="text"
                      id="productName-detail"
                      readonly
                      ng-model="detailStock.productName"
                    />

                    <label for="type-detail"
                      >{{ t('LABEL_TRANSACTION_TYPE') }}</label
                    >
                    <select
                      id="type-detail"
                      ng-model="detailStock.transactionType"
                      disabled
                    >
                      <option value="IN">IN</option>
                      <option value="OUT">OUT</option>
                    </select>

                    <label for="quantity-detail"
                      >{{ t('LABEL_QUANTITY') }}</label
                    >
                    <input
                      type="text"
                      id="quantity-detail"
                      readonly
                      ng-model="detailStock.quantity"
                    />

                    <label for="balance-detail">{{ t('LABEL_BALANCE') }}</label>
                    <input
                      type="text"
                      id="balance-detail"
                      readonly
                      ng-model="detailStock.balance"
                    />

                    <label for="transactionDate-detail"
                      >{{ t('LABEL_TRANSACTION_DATE') }}</label
                    >
                    <input
                      type="text"
                      id="transactionDate-detail"
                      readonly
                      ng-model="detailStock.transactionDate"
                    />
                  </div>

                  <!-- C·ªôt ph·∫£i -->
                  <div>
                    <label for="productID-detail"
                      >{{ t('LABEL_PRODUCT_ID') }}</label
                    >
                    <input
                      type="text"
                      id="productID-detail"
                      readonly
                      ng-model="detailStock.productID"
                    />

                    <label for="receiptID-detail"
                      >{{ t('LABEL_RECEIPT_ID') }}</label
                    >
                    <input
                      type="text"
                      id="receiptID-detail"
                      readonly
                      ng-model="detailStock.receiptID"
                    />

                    <label for="issueID-detail"
                      >{{ t('LABEL_ISSUE_ID') }}</label
                    >
                    <input
                      type="text"
                      id="issueID-detail"
                      readonly
                      ng-model="detailStock.issueID"
                    />

                    <label for="supplierID-detail"
                      >{{ t('LABEL_SUPPLIER_ID') }}</label
                    >
                    <input
                      type="text"
                      id="supplierID-detail"
                      readonly
                      ng-model="detailStock.supplierID"
                    />

                    <label for="batchNo-detail"
                      >{{ t('LABEL_BATCH_NO') }}</label
                    >
                    <input
                      type="text"
                      id="batchNo-detail"
                      readonly
                      ng-model="detailStock.batchNo"
                    />
                  </div>

                  <!-- Footer -->
                  <div class="dialog-footer">
                    <button type="button" class="cancel" ng-click="closeForm()">
                      {{ t('BTN_CANCEL') }}
                    </button>
                  </div>
                </form>
              </div>
            </div>

            <!-- delete -->
            <div
              class="form-delete"
              ng-class="{open:showDelete}"
              ng-click="closeDeleteOnOverlay($event)"
            >
              <div
                class="form-delete__content"
                ng-click="$event.stopPropagation()"
              >
                <h3 class="title">{{ t('DELETE_STOCKCARD') }}</h3>
                <p class="desc">
                  {{ t('DELETE_STOCKCARD_CONFIRM') }} "{ID{deleting.stockID}}"?
                  {{ t('DELETE_RETURN_CONFIRM2') }}
                </p>
                <div class="dialog-footer">
                  <button class="cancel" ng-click="cancelDelete($event)">
                    {{ t('BTN_CANCEL') }}
                  </button>
                  <button
                    type="button"
                    class="submit danger"
                    ng-click="confirmDelete()"
                    ng-disabled="deletingBusy"
                  >
                    {{ t('BTN_DELETE_STOCKCARD') }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="../Shared/js/stockcardfe.js"></script>

    <!-- ƒê√¢y l√† FileSaver.js ‚Äî th∆∞ vi·ªán gi√∫p b·∫°n t·∫£i file t·ª´ tr√¨nh duy·ªát (client-side). -->
  </body>
</html>
