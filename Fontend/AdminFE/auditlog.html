<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet" />

    <!-- css -->
    <link rel="stylesheet" href="../Shared/css/auditlog.css" />
    <script src="../Shared/angular/angular.min.js"></script>
    <script src="../Shared/angular/global.js"></script>
    <script src="../Shared/angular/auditlog.js"></script>
    <title>Auditlog</title>
</head>

<body ng-app="AppRetailPos" ng-controller="auditlogCtrl">
    <div class="slide-bar">
        <div class="slide-bar__header">
            <div class="app-slideBar">
                <div class="app-slideBar__left">
                    <img src="../Shared/img/common/wheel.svg" alt="" class="icon" />
                </div>
                <div class="app-slideBar__right">
                    <h1 class="name-app">RetailPro</h1>
                    <p class="title-nameApp">Inventory & POS</p>
                </div>
            </div>
        </div>
        <div class="slide-bar__Content">
            <p class="slide-bar__label">Navigation</p>
            <!-- menu button Dashboard -->
            <a href="../AdminFE/dashboard.html" ng-if="canShow('dashboard')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/dashboard.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Dashboard</p>
                    </div>
                </div>
            </a>
            <!-- menu button POS -->
            <a href="../AdminFE/pos.html" ng-if="canShow('pos')">
                <div class="slide-bar__MenuButton ">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/pos.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu-active">POS</p>
                    </div>
                </div>
            </a>
            <!-- menu button Products -->
            <a href="../AdminFE/products.html" ng-if="canShow('products')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/product.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Products</p>
                    </div>
                </div>
            </a>
            <!-- menu button Categories -->
            <a href="../AdminFE/categories.html" ng-if="canShow('categories')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/category.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Categories</p>
                    </div>
                </div>
            </a>
            <!-- menu button Promotions -->
            <a href="../AdminFE/promotions.html" ng-if="canShow('promotions')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/promotion.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Promotions</p>
                    </div>
                </div>
            </a>
            <!-- menu button Customers -->
            <a href="../AdminFE/customers.html" ng-if="canShow('customers')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/customer.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Customers</p>
                    </div>
                </div>
            </a>
            <!-- menu button Suppliers -->
            <a href="../AdminFE/suppliers.html" ng-if="canShow('suppliers')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/supplier.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Suppliers</p>
                    </div>
                </div>
            </a>
            <!-- menu button Purchase Orders -->
            <a href="../AdminFE/purchaseorders.html" ng-if="canShow('purchaseOrders')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/purchaseorder.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Purchase Orders</p>
                    </div>
                </div>
            </a>
            <!-- menu button StockCard -->
            <a href="../AdminFE/stockcard.html" ng-if="canShow('purchaseOrders')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/stock.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Stock Management</p>
                    </div>
                </div>
            </a>
            <!-- menu button Goods Receipts -->
            <a href="../AdminFE/goodsreceipts.html" ng-if="canShow('greceipts')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/goodReceipt.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Goods Receipts</p>
                    </div>
                </div>
            </a>
            <!-- menu button Goods Issues -->
            <a href="../AdminFE/goodsissues.html" ng-if="canShow('gissues')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/goodIssues.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Goods Issues</p>
                    </div>
                </div>
            </a>
            <!-- menu button Sales -->
            <a href="../AdminFE/sales.html" ng-if="canShow('sales')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/sales.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Sales</p>
                    </div>
                </div>
            </a>
            <!-- menu button Returns -->
            <a href="../AdminFE/returns.html" ng-if="canShow('returns')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/return.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Returns</p>
                    </div>
                </div>
            </a>
            <!-- menu button Payments & Debts -->
            <a href="../AdminFE/payments.html" ng-if="canShow('payments')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/payments.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Payments & Debts</p>
                    </div>
                </div>
            </a>
            <!-- menu button Reports -->
            <a href="../AdminFE/reports.html" ng-if="canShow('reports')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/report.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Reports</p>
                    </div>
                </div>
            </a>
            <!-- menu button Audit Log -->
            <a href="../AdminFE/auditlog.html" ng-if="canShow('auditLog')">
                <div class="slide-bar__MenuButton slide-bar__MenuButton--active">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/auditlog.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Audit Log</p>
                    </div>
                </div>
            </a>
            <!-- menu button Users -->
            <a href="../AdminFE/users.html" ng-if="canShow('users')">
                <div class="slide-bar__MenuButton ">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/user.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Users</p>
                    </div>
                </div>
            </a>
            <!-- menu button Settings -->
            <a href="../AdminFE/settings.html" ng-if="canShow('settings')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/setting.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Settings</p>
                    </div>
                </div>
            </a>
        </div>
        <div class="slide-bar__footer">
            <div class="app-slide-bar">
                <div class="ava">
                    <img class="ava" src="../Shared/img/common/ava.svg" alt="" />
                </div>
                <div class="info">
                    <p class="name">{{currentUser.fullname}}</p>
                    <p class="role">{{currentUser.role}}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="app-layout">
        <div class="top-bar">
            <div class="top-bar__content">
                <div class="top-bar__left">
                    <img src="../Shared/img/common/search.svg" alt="" class="icon" />
                    <input class="search" type="text" placeholder="Search by address customer"
                        ng-model="searchAddress" />
                </div>
                <div class="top-bar__right">
                    <p class="role">admin</p>
                    <img src="../Shared/img/common/ava.svg" alt="" class="ava" id="avatar" />
                </div>
            </div>
            <div class="top-bar__info" id="information">
                <div class="info-top">
                    <p class="name">John Doe</p>
                    <p class="email">john@company.com</p>
                </div>
                <div class="info-mid">
                    <a href="#!">
                        <p class="set">Profile Settings</p>
                    </a>
                </div>
                <div class="info-bottom">
                    <img src="../Shared/img/categories/logout.svg" alt="" class="icon" />
                    <a href="../AuthFE/login.html">
                        <p class="logout">Logout</p>
                    </a>
                </div>
            </div>
        </div>
        <div class="app-layout-content">
            <div class="container-top">
                <div class="container-top--left">
                    <h1 class="name-system">AuditLogs</h1>
                    <p class="desc-system">
                        general system-wide logs
                    </p>
                </div>




            </div>
            <!-- ===== TÌM KIẾM AUDIT LOG ===== -->
            <div class="search-auditlog">
                <!-- Từ ngày -->
                <div class="search-field">
                    <label>Từ ngày:</label>
                    <input type="date" ng-model="searchFromDate" class="search" />
                </div>

                <!-- Đến ngày -->
                <div class="search-field">
                    <label>Đến ngày:</label>
                    <input type="date" ng-model="searchToDate" class="search" />
                </div>

                <!-- User ID -->
                <div class="search-field">
                    <label>User ID:</label>
                    <input type="text" ng-model="searchUserID" class="search" placeholder="Nhập User ID" />
                </div>

                <!-- Thao tác (Operation) -->
                <div class="search-field">
                    <label>Thao tác:</label>
                    <select ng-model="searchOperation" class="search">
                        <option value="">-- Tất cả thao tác --</option>
                        <option value="CREATE">CREATE - Tạo mới</option>
                        <option value="UPDATE">UPDATE - Cập nhật</option>
                        <option value="DELETE">DELETE - Xóa</option>
                        <option value="LOGIN">LOGIN - Đăng nhập</option>
                    </select>
                </div>
            </div>
            <!-- phân trang -->
            <div class="pager" ng-if="pager.total>0">
                <div class="pager-info">
                    Showing
                    {{((pager.page-1)*pager.size)+1}}-{{Math.min(pager.page*pager.size,pager.total)}}
                    of {{pager.total}} items
                </div>
                <div class="page-nav">
                    <label>
                        Page size:
                        <select ng-model="pager.size" ng-change="changeSize()">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="30">30</option>
                        </select>
                    </label>
                    <button class="btn ghost" ng-disable="pager.page === 1" ng-click="go(1)">
                        «
                    </button>
                    <button class="btn ghost" ng-disabled="pager.page === 1" ng-click="go(pager.page-1)">
                        Prev
                    </button>
                    <span class="page-no"></span>
                    <button class="btn ghost" ng-disabled="pager.page >= pager.pages" ng-click="go(pager.page+1)">
                        Next
                    </button>
                    <button class="btn ghost" ng-disabled="pager.page >= pager.pages" ng-click="go(pager.pages)">
                        »
                    </button>
                </div>
            </div>
            <!-- ===== BẢNG HIỂN THỊ AUDIT LOG ===== -->
            <div class="card-table">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="id">AuditID</th>
                                <th class="user">UserID</th>
                                <th class="username">Username</th>
                                <th class="fullname">FullName</th>
                                <th class="entity">EntityName</th>
                                <th class="entity-id">EntityID</th>
                                <th class="operation">Operation</th>
                                <th class="details">Details</th>
                                <th class="date">CreatedAt</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="log in auditLogs track by log.auditID">
                                <td class="id txt-center">{{log.auditID}}</td>
                                <td class="user txt-center">{{log.userID || '—'}}</td>
                                <td class="username">{{log.username || '—'}}</td>
                                <td class="fullname">{{log.fullName || '—'}}</td>
                                <td class="entity txt-center">
                                    <span class="tag-entity">{{log.entityName || '—'}}</span>
                                </td>
                                <td class="entity-id txt-center">{{log.entityID || '—'}}</td>
                                <td class="operation txt-center">
                                    <span class="tag-op tag-{{log.operation | lowercase}}">
                                        {{log.operation}}
                                    </span>
                                </td>
                                <td class="details">
                                    <span class="details-text" title="{{log.details}}">
                                        {{log.details ? (log.details.length > 60 ? log.details.substring(0,60) + '...' :
                                        log.details) : '—'}}
                                    </span>
                                </td>
                                <td class="date txt-center">
                                    {{log.createdAt | date:'dd/MM/yyyy HH:mm:ss'}}
                                </td>
                            </tr>
                            <tr ng-if="!auditLogs || auditLogs.length === 0">
                                <td colspan="9" class="empty">Không có dữ liệu</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>


        </div>

    </div>
    <script src="../Shared/js/goodsissues.js"></script>

</body>

</html>