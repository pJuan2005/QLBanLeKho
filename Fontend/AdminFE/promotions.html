<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet" />

    <!-- css -->
    <link rel="stylesheet" href="../Shared/css/promotions.css" />
    <script src="../Shared/angular/angular.min.js"></script>
    <script src="../Shared/angular/global.js"></script>
    <script src="../Shared/angular/promotions.js"></script>
    <title>Promotion</title>

</head>

<body ng-app="AppRetailPos" ng-controller="promotionCtrl">
    <div class="slide-bar">
        <div class="slide-bar__header">
            <div class="app-slideBar">
                <div class="app-slideBar__left">
                    <img src="../Shared/img/common/wheel.svg" alt="" class="icon" />
                </div>
                <div class="app-slideBar__right">
                    <h1 class="name-app">RetailPro</h1>
                    <p class="title-nameApp">Inventory & POS</p>
                </div>
            </div>
        </div>
        <div class="slide-bar__Content">
            <p class="slide-bar__label">Navigation</p>
            <!-- menu button Dashboard -->
            <a href="../AdminFE/dashboard.html" ng-if="canShow('dashboard')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/dashboard.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Dashboard</p>
                    </div>
                </div>
            </a>
            <!-- menu button POS -->
            <a href="../AdminFE/pos.html" ng-if="canShow('pos')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/pos.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">POS</p>
                    </div>
                </div>
            </a>
            <!-- menu button Products -->
            <a href="../AdminFE/products.html" ng-if="canShow('products')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/product.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Products</p>
                    </div>
                </div>
            </a>
            <!-- menu button Categories -->
            <a href="../AdminFE/categories.html" ng-if="canShow('categories')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/category.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Categories</p>
                    </div>
                </div>
            </a>

            <!-- menu button Promotions -->
            <a href="../AdminFE/promotions.html" ng-if="canShow('promotions')">
                <div class="slide-bar__MenuButton slide-bar__MenuButton--active">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/promotion.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu-active">Promotions</p>
                    </div>
                </div>
            </a>
            <!-- menu button Customers -->
            <a href="../AdminFE/customers.html" ng-if="canShow('customers')">
                <div class="slide-bar__MenuButton ">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/customer.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Customers</p>
                    </div>
                </div>
            </a>
            <!-- menu button Suppliers -->
            <a href="../AdminFE/suppliers.html" ng-if="canShow('suppliers')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/supplier.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Suppliers</p>
                    </div>
                </div>
            </a>
            <!-- menu button Purchase Orders -->
            <a href="../AdminFE/purchaseorders.html" ng-if="canShow('purchaseOrders')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/purchaseorder.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Purchase Orders</p>
                    </div>
                </div>
            </a>
            <!-- menu button StockCard -->
            <a href="../AdminFE/stockcard.html" ng-if="canShow('stock')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/stock.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Stock Management</p>
                    </div>
                </div>
            </a>

            <!-- menu button Goods Receipts -->
            <a href="../AdminFE/goodsreceipts.html" ng-if="canShow('greceipts')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/goodReceipt.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Goods Receipts</p>
                    </div>
                </div>
            </a>

            <!-- menu button Goods Issues -->
            <a href="../AdminFE/goodsissues.html" ng-if="canShow('gissues')">
                <div class="slide-bar__MenuButton ">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/goodIssues.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Goods Issues</p>
                    </div>
                </div>
            </a>

            <!-- menu button Sales -->
            <a href="../AdminFE/sales.html" ng-if="canShow('sales')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/sales.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Sales</p>
                    </div>
                </div>
            </a>
            <!-- menu button Returns -->
            <a href="../AdminFE/returns.html" ng-if="canShow('returns')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/return.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Returns</p>
                    </div>
                </div>
            </a>
            <!-- menu button Payments & Debts -->
            <a href="../AdminFE/payments.html" ng-if="canShow('payments')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/payments.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Payments & Debts</p>
                    </div>
                </div>
            </a>
            <!-- menu button Reports -->
            <a href="../AdminFE/reports.html" ng-if="canShow('reports')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/report.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Reports</p>
                    </div>
                </div>
            </a>
            <!-- menu button Audit Log -->
            <a href="../AdminFE/auditlog.html" ng-if="canShow('auditLog')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/auditlog.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Audit Log</p>
                    </div>
                </div>
            </a>
            <!-- menu button Users -->
            <a href="../AdminFE/users.html" ng-if="canShow('users')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/user.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Users</p>
                    </div>
                </div>
            </a>
            <!-- menu button Settings -->
            <a href="../AdminFE/settings.html" ng-if="canShow('settings')">
                <div class="slide-bar__MenuButton">
                    <div class="MenuButton-left">
                        <img src="../Shared/img/common/setting.svg" alt="" class="icon" />
                    </div>
                    <div class="MenuButton-right">
                        <p class="name-menu">Settings</p>
                    </div>
                </div>
            </a>
        </div>
        <div class="slide-bar__footer">
            <div class="app-slide-bar">
                <div class="ava">
                    <img class="ava" src="../Shared/img/common/ava.svg" alt="" />
                </div>
                <div class="info">
                    <p class="name">{{currentUser.fullname}}</p>
                    <p class="role">{{currentUser.role}}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="app-layout">
        <div class="top-bar">
            <div class="top-bar__content">
                <div class="top-bar__left">
                    <img src="../Shared/img/common/search.svg" alt="" class="icon" />
                    <input class="search" type="text" placeholder="Search by address customer"
                        ng-model="searchAddress" />
                </div>
                <div class="top-bar__right">
                    <p class="role">{{currentUser.role}}</p>
                    <img src="../Shared/img/common/ava.svg" alt="" class="ava" id="avatar" />
                </div>
            </div>
            <div class="top-bar__info" id="information">
                <div class="info-top">
                    <p class="name">John Doe</p>
                    <p class="email">john@company.com</p>
                </div>
                <div class="info-mid">
                    <a href="#!">
                        <p class="set">Profile Settings</p>
                    </a>
                </div>
                <div class="info-bottom">
                    <img src="../Shared/img/categories/logout.svg" alt="" class="icon" />
                    <a href="../AuthFE/login.html">
                        <p class="logout">Logout</p>
                    </a>
                </div>
            </div>
        </div>
        <div class="app-layout-content">
            <div class="container-top">
                <div class="container-top--left">
                    <h1 class="name-system">Promotions</h1>
                    <p class="desc-system">
                        Manage discounts and special offers
                    </p>
                </div>
                <div class="container-top--right">

                    <div class="control add-promotion" ng-click="openAdd()">
                        <img src="../Shared/img/common/plus.svg" alt="" class="icon-control" />
                        <p class="name-control">Add Promotion</p>
                    </div>
                </div>
            </div>
            <div class="container-card">
                <div class="card">
                    <p class="name-card">Total Promotion</p>
                    <p class="data-card">{{stats.totalPromotion}}</p>
                </div>
                <div class="card">
                    <p class="name-card">Total Status Active</p>
                    <p class="data-card">{{stats.totalActive}}</p>
                </div>
                <div class="card">
                    <p class="name-card">Total Status Expired</p>
                    <p class="data-card">{{stats.totalExpired}}</p>
                </div>
            </div>

            <div class="search-promotion">
                <div class="search-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" id="startDate" ng-model="search.fromDate" class="search-input" />
                </div>

                <div class="search-group">
                    <label for="endDate">End Date</label>
                    <input type="date" id="endDate" ng-model="search.toDate" class="search-input" />
                </div>

                <div class="search-group">
                    <label for="status">Status</label>
                    <select id="status" ng-model="search.status" class="search-input">
                        <option value="">-- All --</option>
                        <option value="Active">Active</option>
                        <option value="Expired">Expired</option>
                    </select>
                </div>
            </div>
            <!-- phÃ¢n trang -->
            <div class="pager" ng-if="pager.total>0">
                <div class="pager-info">
                    Showing
                    {{((pager.page-1)*pager.size)+1}}-{{Math.min(pager.page*pager.size,pager.total)}}
                    of {{pager.total}} items
                </div>
                <div class="page-nav">
                    <label>
                        Page size:
                        <select ng-model="pager.size" ng-change="changeSize()">
                            <option value="10">10</option>
                            <option value="20">20</option>
                            <option value="30">30</option>
                        </select>
                    </label>
                    <button class="btn ghost" ng-disable="pager.page === 1" ng-click="go(1)">
                        Â«
                    </button>
                    <button class="btn ghost" ng-disabled="pager.page === 1" ng-click="go(pager.page-1)">
                        Prev
                    </button>
                    <span class="page-no"></span>
                    <button class="btn ghost" ng-disabled="pager.page >= pager.pages" ng-click="go(pager.page+1)">
                        Next
                    </button>
                    <button class="btn ghost" ng-disabled="pager.page >= pager.pages" ng-click="go(pager.pages)">
                        Â»
                    </button>
                </div>
            </div>

            <div class="card-table">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="id">Promotion ID</th>
                                <th class="name">Promotion Name</th>
                                <th class="type">Type</th>
                                <th class="value">Value</th>
                                <th class="start">Start Date</th>
                                <th class="end">End Date</th>
                                <th class="category">Category</th>
                                <th class="status">Status</th>
                                <th class="action txt-right">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="p in promotions">
                                <td>{{p.promotionID || p.PromotionID}}</td>
                                <td>{{p.promotionName || p.PromotionName}}</td>
                                <td>{{p.type || p.Type}}</td>
                                <td>{{p.value || p.Value | number:0}}</td>
                                <td>{{p.startDate || p.StartDate | date:'yyyy-MM-dd'}}</td>
                                <td>{{p.endDate || p.EndDate | date:'yyyy-MM-dd'}}</td>
                                <td>{{p.categoryID || p.CategoryID}}</td>
                                <td>{{p.status || p.Status}}</td>
                                <td class="txt-right">
                                    <button class="link" ng-click="edit(p)">âœŽ Edit</button>
                                    <button class="link danger" ng-click="remove(p)">ðŸ—‘ Delete</button>
                                </td>
                            </tr>
                            <tr ng-if="promotions.length == 0">
                                <td colspan="9" class="empty">No Data</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- form -->
            <div class="form">
                <!-- Modal Add Promotion -->
                <div class="form-add" ng-class="{open: showAdd}" ng-click="closeAddOnOverlay($event)">
                    <div class="form-add__content" ng-click="$event.stopPropagation()">
                        <h3 class="title">Add New Promotion</h3>
                        <p class="desc">Enter promotion details</p>
                        <form name="frmAddPromotion" ng-submit="addPromotion()">
                            <label for="name-add">Promotion Name</label>
                            <input type="text" id="name-add" required placeholder="Enter promotion name"
                                ng-model="newPromotion.promotionName" />

                            <div class="both">
                                <div class="both-left">
                                    <label for="type-add">Type</label>
                                    <select id="type-add" required ng-model="newPromotion.type">
                                        <option value="percent">Percent</option>
                                        <option value="amount">Amount</option>
                                    </select>
                                </div>
                                <div class="both-right">
                                    <label for="value-add">Value</label>
                                    <input type="number" id="value-add" required placeholder="Enter promotion value"
                                        ng-model="newPromotion.value" />
                                </div>
                            </div>

                            <div class="both">
                                <div class="both-left">
                                    <label for="startDate-add">Start Date</label>
                                    <input type="date" id="startDate-add" required ng-model="newPromotion.startDate" />
                                </div>
                                <div class="both-right">
                                    <label for="endDate-add">End Date</label>
                                    <input type="date" id="endDate-add" required ng-model="newPromotion.endDate" />
                                </div>
                            </div>

                            <label for="category-add">Category ID</label>
                            <input type="number" id="category-add" required placeholder="Enter category ID"
                                ng-model="newPromotion.categoryID" />

                            <div class="dialog-footer">
                                <button type="button" class="cancel" ng-click="cancelAdd()">Cancel</button>
                                <input class="submit" type="submit" value="Add New Promotion"
                                    ng-disabled="frmAddPromotion.$invalid || savingAdd" />
                            </div>
                        </form>
                    </div>
                </div>
                <!-- edit promotion -->
                <div class="form-edit" ng-class="{open: showEdit}" ng-click="closeEditOnOverlay($event)">
                    <div class="form-edit__content" ng-click="$event.stopPropagation()">
                        <h3 class="title">Edit Promotion</h3>
                        <form name="frmEditPromotion" ng-submit="updatePromotion()">
                            <label for="name-edit">Promotion Name</label>
                            <input type="text" id="name-edit" required placeholder="Enter promotion name"
                                ng-model="editingPromotion.PromotionName" />

                            <div class="both">
                                <div class="both-left">
                                    <label for="type-edit">Type</label>
                                    <select id="type-edit" required ng-model="editingPromotion.Type">
                                        <option value="percent">Percent</option>
                                        <option value="amount">Amount</option>
                                    </select>
                                </div>
                                <div class="both-right">
                                    <label for="value-edit">Value</label>
                                    <input type="number" id="value-edit" required placeholder="Enter promotion value"
                                        ng-model="editingPromotion.Value" />
                                </div>
                            </div>

                            <div class="both">
                                <div class="both-left">
                                    <label for="startDate-edit">Start Date</label>
                                    <input type="date" id="startDate-edit" required
                                        ng-model="editingPromotion.StartDate" />
                                </div>
                                <div class="both-right">
                                    <label for="endDate-edit">End Date</label>
                                    <input type="date" id="endDate-edit" required ng-model="editingPromotion.EndDate" />
                                </div>
                            </div>

                            <label for="category-edit">Category ID</label>
                            <input type="number" id="category-edit" required placeholder="Enter category ID"
                                ng-model="editingPromotion.CategoryID" />

                            <label for="status-edit">Status</label>
                            <select id="status-edit" required ng-model="editingPromotion.Status">
                                <option value="Active">Active</option>
                                <option value="Expired">Expired</option>
                            </select>

                            <div class="dialog-footer">
                                <button type="button" class="cancel" ng-click="cancelEdit()">Cancel</button>
                                <input class="submit" type="submit" value="Edit Promotion"
                                    ng-disabled="frmEditPromotion.$invalid || savingEdit" />
                            </div>
                        </form>
                    </div>
                </div>

                <!-- delete promotion -->
                <div class="form-delete" ng-class="{open:showDelete}" ng-click="closeDeleteOnOverlay($event)">
                    <div class="form-delete__content" ng-click="$event.stopPropagation()">
                        <h3 class="title">Delete Promotion</h3>
                        <p class="desc">
                            Are you sure you want to delete the promotion
                            "{{deleting.promotionName || deleting.PromotionName}}"? This action cannot be undone.
                        </p>
                        <div class="dialog-footer">
                            <button class="cancel" ng-click="cancelDelete($event)">
                                Cancel
                            </button>
                            <button class="submit danger" ng-click="confirmDelete()">
                                Delete Promotion
                            </button>
                        </div>
                    </div>
                </div>




            </div>

        </div>

    </div>

    <script src="../Shared/js/promotions.js"></script>

</body>

</html>